# The configurations that used for the recording, feel free to edit them
config:

  # Specify a command to be executed
  # like `/bin/bash -l`, `ls`, or any other commands
  # the default is bash for Linux
  # or powershell.exe for Windows
  command: bash -l
  
  # Specify the current working directory path
  # the default is the current working directory path
  cwd: /home/vcx/free5gc-kube-ovn
  
  # Export additional ENV variables
  env:
    recording: true
  
  # Explicitly set the number of columns
  # or use `auto` to take the current
  # number of columns of your shell
  cols: 102
  
  # Explicitly set the number of rows
  # or use `auto` to take the current
  # number of rows of your shell
  rows: 28
  
  # Amount of times to repeat GIF
  # If value is -1, play once
  # If value is 0, loop indefinitely
  # If value is a positive number, loop n times
  repeat: 0
  
  # Quality
  # 1 - 100
  quality: 100
  
  # Delay between frames in ms
  # If the value is `auto` use the actual recording delays
  frameDelay: auto
  
  # Maximum delay between frames in ms
  # Ignored if the `frameDelay` isn't set to `auto`
  # Set to `auto` to prevent limiting the max idle time
  maxIdleTime: 2000
  
  # The surrounding frame box
  # The `type` can be null, window, floating, or solid`
  # To hide the title use the value null
  # Don't forget to add a backgroundColor style with a null as type
  frameBox:
    type: floating
    title: Terminalizer
    style:
      border: 0px black solid
      # boxShadow: none
      # margin: 0px
  
  # Add a watermark image to the rendered gif
  # You need to specify an absolute path for
  # the image on your machine or a URL, and you can also
  # add your own CSS styles
  watermark:
    imagePath: null
    style:
      position: absolute
      right: 15px
      bottom: 15px
      width: 100px
      opacity: 0.9
  
  # Cursor style can be one of
  # `block`, `underline`, or `bar`
  cursorStyle: block
  
  # Font family
  # You can use any font that is installed on your machine
  # in CSS-like syntax
  fontFamily: "Monaco, Lucida Console, Ubuntu Mono, Monospace"
  
  # The size of the font
  fontSize: 12
  
  # The height of lines
  lineHeight: 1
  
  # The spacing between letters
  letterSpacing: 0
  
  # Theme
  theme:
    background: "transparent"
    foreground: "#afafaf"
    cursor: "#c7c7c7"
    black: "#232628"
    red: "#fc4384"
    green: "#b3e33b"
    yellow: "#ffa727"
    blue: "#75dff2"
    magenta: "#ae89fe"
    cyan: "#708387"
    white: "#d5d5d0"
    brightBlack: "#626566"
    brightRed: "#ff7fac"
    brightGreen: "#c8ed71"
    brightYellow: "#ebdf86"
    brightBlue: "#75dff2"
    brightMagenta: "#ae89fe"
    brightCyan: "#b1c6ca"
    brightWhite: "#f9f9f4"
  
# Records, feel free to edit them
records:
  - delay: 5867
    content: "(base) \e]0;vcx@vcx-virtual-machine: ~/free5gc-kube-ovn\a\e[01;32mvcx@vcx-virtual-machine\e[00m:\e[01;34m~/free5gc-kube-ovn\e[00m$ "
  - delay: 2335
    content: s
  - delay: 120
    content: u
  - delay: 250
    content: d
  - delay: 175
    content: o
  - delay: 196
    content: ' '
  - delay: 794
    content: .
  - delay: 248
    content: /
  - delay: 576
    content: q
  - delay: 311
    content: 'uickstart.sh '
  - delay: 952
    content: "\r\n"
  - delay: 79
    content: '[sudo] password for vcx: '
  - delay: 3780
    content: "\r\n"
  - delay: 30
    content: "[Initial 0] Create kubernetes cluster\r\n"
  - delay: 4099
    content: "I0616 15:37:56.939286    6101 version.go:252] remote version is much newer: v1.21.1; falling back to: stable-1.19\r\n"
  - delay: 396
    content: "W0616 15:37:57.335209    6101 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\r\n"
  - delay: 32
    content: "[init] Using Kubernetes version: v1.19.11\r\n[preflight] Running pre-flight checks\r\n"
  - delay: 6229
    content: "\t[WARNING IsDockerSystemdCheck]: detected \"cgroupfs\" as the Docker cgroup driver. The recommended driver is \"systemd\". Please follow the guide at https://kubernetes.io/docs/setup/cri/\r\n"
  - delay: 5718
    content: "[preflight] Pulling images required for setting up a Kubernetes cluster\r\n[preflight] This might take a minute or two, depending on the speed of your internet connection\r\n[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'\r\n"
  - delay: 443
    content: "[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\r\n"
  - delay: 394
    content: "[certs] Generating \"ca\" certificate and key\r\n"
  - delay: 205
    content: "[certs] Generating \"apiserver\" certificate and key\r\n[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local vcx-virtual-machine] and IPs [10.96.0.1 140.116.247.67]\r\n"
  - delay: 453
    content: "[certs] Generating \"apiserver-kubelet-client\" certificate and key\r\n"
  - delay: 120
    content: "[certs] Generating \"front-proxy-ca\" certificate and key\r\n"
  - delay: 275
    content: "[certs] Generating \"front-proxy-client\" certificate and key\r\n"
  - delay: 315
    content: "[certs] Generating \"etcd/ca\" certificate and key\r\n"
  - delay: 359
    content: "[certs] Generating \"etcd/server\" certificate and key\r\n[certs] etcd/server serving cert is signed for DNS names [localhost vcx-virtual-machine] and IPs [140.116.247.67 127.0.0.1 ::1]\r\n"
  - delay: 178
    content: "[certs] Generating \"etcd/peer\" certificate and key\r\n[certs] etcd/peer serving cert is signed for DNS names [localhost vcx-virtual-machine] and IPs [140.116.247.67 127.0.0.1 ::1]\r\n"
  - delay: 390
    content: "[certs] Generating \"etcd/healthcheck-client\" certificate and key\r\n"
  - delay: 129
    content: "[certs] Generating \"apiserver-etcd-client\" certificate and key\r\n"
  - delay: 434
    content: "[certs] Generating \"sa\" key and public key\r\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\r\n"
  - delay: 949
    content: "[kubeconfig] Writing \"admin.conf\" kubeconfig file\r\n"
  - delay: 183
    content: "[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\r\n"
  - delay: 329
    content: "[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\r\n"
  - delay: 145
    content: "[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\r\n"
  - delay: 390
    content: "[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\r\n"
  - delay: 28
    content: "[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\r\n[kubelet-start] Starting the kubelet\r\n"
  - delay: 196
    content: "[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\r\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\r\n"
  - delay: 21
    content: "[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\r\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\r\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\r\n"
  - delay: 14
    content: "[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\". This can take up to 4m0s\r\n"
  - delay: 27502
    content: "[apiclient] All control plane components are healthy after 27.502136 seconds\r\n[upload-config] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace\r\n"
  - delay: 34
    content: "[kubelet] Creating a ConfigMap \"kubelet-config-1.19\" in namespace kube-system with the configuration for the kubelets in the cluster\r\n"
  - delay: 518
    content: "[upload-certs] Skipping phase. Please see --upload-certs\r\n[mark-control-plane] Marking the node vcx-virtual-machine as control-plane by adding the label \"node-role.kubernetes.io/master=''\"\r\n[mark-control-plane] Marking the node vcx-virtual-machine as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\r\n"
  - delay: 511
    content: "[bootstrap-token] Using token: gmijs8.7772rzsgl1tnsscn\r\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\r\n"
  - delay: 31
    content: "[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\r\n"
  - delay: 7
    content: "[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\r\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\r\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\r\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\r\n"
  - delay: 8
    content: "[kubelet-finalize] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key\r\n"
  - delay: 400
    content: "[addons] Applied essential addon: CoreDNS\r\n"
  - delay: 160
    content: "[addons] Applied essential addon: kube-proxy\r\n\r\nYour Kubernetes control-plane has initialized successfully!\r\n\r\nTo start using your cluster, you need to run the following as a regular user:\r\n\r\n  mkdir -p $HOME/.kube\r\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\r\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\r\n\r\nYou should now deploy a pod network to the cluster.\r\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\r\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\r\n\r\nThen you can join any number of worker nodes by running the following on each as root:\r\n\r\nkubeadm join 140.116.247.67:6443 --token gmijs8.7772rzsgl1tnsscn \\\r\n    --discovery-token-ca-cert-hash sha256:93aa1db0516195f09062928d294fffc245bda227f9bb3fafadeb5d8458948a84 \r\n-------------------------------\r\n\r\n[Initial 1] Set up local kubeconfig\r\n"
  - delay: 27
    content: 'cp: overwrite ''/home/vcx/.kube/config''? '
  - delay: 2822
    content: 'y'
  - delay: 991
    content: "\r\n"
  - delay: 11
    content: "-------------------------------\r\n\r\n"
  - delay: 6
    content: "[Step 1] Label kube-ovn-master node\r\n"
  - delay: 712
    content: "node/vcx-virtual-machine labeled\r\n-------------------------------\r\n\r\n[Step 2] Install OVN components\r\n"
  - delay: 96
    content: "Install OVN DB in 140.116.247.67,\r\n"
  - delay: 486
    content: "customresourcedefinition.apiextensions.k8s.io/vpc-nat-gateways.kubeovn.io created\r\n"
  - delay: 7
    content: "customresourcedefinition.apiextensions.k8s.io/vpcs.kubeovn.io created\r\n"
  - delay: 19
    content: "customresourcedefinition.apiextensions.k8s.io/ips.kubeovn.io created\r\n"
  - delay: 10
    content: "customresourcedefinition.apiextensions.k8s.io/subnets.kubeovn.io created\r\n"
  - delay: 6
    content: "customresourcedefinition.apiextensions.k8s.io/vlans.kubeovn.io created\r\n"
  - delay: 249
    content: "podsecuritypolicy.policy/kube-ovn created\r\n"
  - delay: 9
    content: "configmap/ovn-config created\r\n"
  - delay: 5
    content: "serviceaccount/ovn created\r\n"
  - delay: 7
    content: "clusterrole.rbac.authorization.k8s.io/system:ovn created\r\nclusterrolebinding.rbac.authorization.k8s.io/ovn created\r\n"
  - delay: 8
    content: "service/ovn-nb created\r\n"
  - delay: 13
    content: "service/ovn-sb created\r\n"
  - delay: 12
    content: "service/ovn-northd created\r\n"
  - delay: 21
    content: "deployment.apps/ovn-central created\r\n"
  - delay: 9
    content: "daemonset.apps/ovs-ovn created\r\n"
  - delay: 109
    content: "Waiting for deployment spec update to be observed...\r\n"
  - delay: 2566
    content: "Waiting for deployment spec update to be observed...\r\n"
  - delay: 45
    content: "Waiting for deployment \"ovn-central\" rollout to finish: 0 of 1 updated replicas are available...\r\n"
  - delay: 13285
    content: "deployment \"ovn-central\" successfully rolled out\r\n-------------------------------\r\n\r\n[Step 3] Install Kube-OVN\r\n"
  - delay: 347
    content: "deployment.apps/kube-ovn-controller created\r\n"
  - delay: 33
    content: "daemonset.apps/kube-ovn-cni created\r\n"
  - delay: 25
    content: "daemonset.apps/kube-ovn-pinger created\r\n"
  - delay: 28
    content: "deployment.apps/kube-ovn-monitor created\r\n"
  - delay: 29
    content: "service/kube-ovn-monitor created\r\n"
  - delay: 21
    content: "service/kube-ovn-pinger created\r\n"
  - delay: 14
    content: "service/kube-ovn-controller created\r\n"
  - delay: 20
    content: "service/kube-ovn-cni created\r\n"
  - delay: 133
    content: "Waiting for deployment \"kube-ovn-controller\" rollout to finish: 0 of 1 updated replicas are available...\r\n"
  - delay: 5366
    content: "deployment \"kube-ovn-controller\" successfully rolled out\r\n"
  - delay: 95
    content: "Waiting for daemon set \"kube-ovn-cni\" rollout to finish: 0 of 1 updated pods are available...\r\n"
  - delay: 63162
    content: "daemon set \"kube-ovn-cni\" successfully rolled out\r\n-------------------------------\r\n\r\n[Step 4] Delete pod that not in host network mode\r\n"
  - delay: 512
    content: "pod \"coredns-f9fd979d6-cjjwm\" deleted\r\n"
  - delay: 119
    content: "pod \"coredns-f9fd979d6-qgvft\" deleted\r\n"
  - delay: 97
    content: "pod \"kube-ovn-monitor-68c5b5cbb-tmhv4\" deleted\r\n"
  - delay: 955
    content: "pod \"kube-ovn-pinger-gxqqb\" deleted\r\n"
  - delay: 3972
    content: "Waiting for daemon set \"kube-ovn-pinger\" rollout to finish: 0 of 1 updated pods are available...\r\n"
  - delay: 1949
    content: "daemon set \"kube-ovn-pinger\" successfully rolled out\r\n"
  - delay: 93
    content: "Waiting for deployment \"coredns\" rollout to finish: 0 of 2 updated replicas are available...\r\n"
  - delay: 16494
    content: "Waiting for deployment \"coredns\" rollout to finish: 1 of 2 updated replicas are available...\r\n"
  - delay: 385
    content: "deployment \"coredns\" successfully rolled out\r\n-------------------------------\r\n\r\n[Step 5] Install kubectl plugin\r\n"
  - delay: 11
    content: "-------------------------------\r\n\r\n[Step 6] Run network diagnose\r\n"
  - delay: 296
    content: "NAME              CREATED AT\r\nvpcs.kubeovn.io   2021-06-16T07:38:49Z\r\n"
  - delay: 89
    content: "NAME                          CREATED AT\r\nvpc-nat-gateways.kubeovn.io   2021-06-16T07:38:49Z\r\n"
  - delay: 72
    content: "NAME                 CREATED AT\r\nsubnets.kubeovn.io   2021-06-16T07:38:49Z\r\n"
  - delay: 72
    content: "NAME             CREATED AT\r\nips.kubeovn.io   2021-06-16T07:38:49Z\r\n"
  - delay: 73
    content: "NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE\r\nkube-dns   ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP,9153/TCP   116s\r\n"
  - delay: 87
    content: "NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\r\nkubernetes   ClusterIP   10.96.0.1    <none>        443/TCP   118s\r\n"
  - delay: 73
    content: "NAME   SECRETS   AGE\r\novn    1         111s\r\n"
  - delay: 78
    content: "NAME         CREATED AT\r\nsystem:ovn   2021-06-16T07:38:49Z\r\n"
  - delay: 74
    content: "NAME   ROLE                     AGE\r\novn    ClusterRole/system:ovn   111s\r\n"
  - delay: 73
    content: "NAME                  STATUS   ROLES    AGE    VERSION   INTERNAL-IP      EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME\r\nvcx-virtual-machine   Ready    master   118s   v1.19.0   140.116.247.67   <none>        Ubuntu 18.04.3 LTS   5.0.0-23-generic   docker://19.3.13\r\n"
  - delay: 463
    content: "switch 75f1d6cc-6fb0-4c4b-81a2-b054f1f9225e (join)\r\n    port node-vcx-virtual-machine\r\n        addresses: [\"00:00:00:18:7C:22 100.64.0.2\"]\r\n    port join-ovn-cluster\r\n        type: router\r\n        addresses: [\"00:00:00:A8:89:0A\"]\r\n        router-port: ovn-cluster-join\r\nswitch 6578af7e-d8b9-455d-82f7-2c4e229dc6af (ovn-default)\r\n    port coredns-f9fd979d6-v4m82.kube-system\r\n        addresses: [\"00:00:00:84:6A:65 10.16.0.7\"]\r\n    port kube-ovn-pinger-kxqs8.kube-system\r\n        addresses: [\"00:00:00:AA:34:E0 10.16.0.9\"]\r\n    port ovn-default-ovn-cluster\r\n        type: router\r\n        addresses: [\"00:00:00:37:57:3D\"]\r\n        router-port: ovn-cluster-ovn-default\r\n    port coredns-f9fd979d6-cbm8m.kube-system\r\n        addresses: [\"00:00:00:FF:62:0C 10.16.0.6\"]\r\n    port kube-ovn-monitor-68c5b5cbb-btqfp.kube-system\r\n        addresses: [\"00:00:00:5C:44:2A 10.16.0.8\"]\r\nrouter f22f83b7-2b7c-459f-88c9-839e19567eb2 (ovn-cluster)\r\n    port ovn-cluster-join\r\n        mac: \"00:00:00:A8:89:0A\"\r\n        networks: [\"100.64.0.1/16\"]\r\n    port ovn-cluster-ovn-default\r\n        mac: \"00:00:00:37:57:3D\"\r\n        networks: [\"10.16.0.1/16\"]\r\n"
  - delay: 450
    content: "IPv4 Routes\r\n           140.116.247.67                100.64.0.2 dst-ip\r\n                10.16.0.6                100.64.0.2 src-ip\r\n                10.16.0.7                100.64.0.2 src-ip\r\n                10.16.0.8                100.64.0.2 src-ip\r\n                10.16.0.9                100.64.0.2 src-ip\r\n"
  - delay: 369
    content: "UUID                                    LB                  PROTO      VIP                     IPs\r\n8af721a4-46e8-48e3-86dd-9b6924246280    cluster-tcp-load    tcp        10.102.164.206:10665    140.116.247.67:10665\r\n                                                            tcp        10.108.207.166:10660    140.116.247.67:10660\r\n                                                            tcp        10.109.53.121:10661     10.16.0.8:10661\r\n                                                            tcp        10.110.253.180:6642     140.116.247.67:6642\r\n                                                            tcp        10.96.0.10:53           10.16.0.6:53,10.16.0.7:53\r\n                                                            tcp        10.96.0.10:9153         10.16.0.6:9153,10.16.0.7:9153\r\n                                                            tcp        10.96.0.1:443           140.116.247.67:6443\r\n                                                            tcp        10.96.24.29:8080        10.16.0.9:8080\r\n                                                            tcp        10.98.22.26:6641        140.116.247.67:6641\r\n                                                            tcp        10.99.1.148:6643        140.116.247.67:6643\r\n251bb197-4fd7-4a1e-83b0-ce8445a4a293    cluster-udp-load    udp        10.96.0.10:53           10.16.0.6:53,10.16.0.7:53\r\n"
  - delay: 835
    content: "Chassis \"f3076915-7d9d-4c1f-b68f-5d41b83c0106\"\r\n    hostname: vcx-virtual-machine\r\n    Encap geneve\r\n        ip: \"140.116.247.67\"\r\n        options: {csum=\"false\"}\r\n    Port_Binding kube-ovn-monitor-68c5b5cbb-btqfp.kube-system\r\n    Port_Binding coredns-f9fd979d6-cbm8m.kube-system\r\n    Port_Binding kube-ovn-pinger-kxqs8.kube-system\r\n    Port_Binding node-vcx-virtual-machine\r\n    Port_Binding coredns-f9fd979d6-v4m82.kube-system\r\n"
  - delay: 409
    content: "ds kube-proxy ready\r\n"
  - delay: 311
    content: "deployment ovn-central ready\r\n"
  - delay: 287
    content: "deployment kube-ovn-controller ready\r\n"
  - delay: 343
    content: "ds kube-ovn-cni ready\r\n"
  - delay: 343
    content: "ds ovs-ovn ready\r\n"
  - delay: 293
    content: "deployment coredns ready\r\n### kube-ovn-controller recent log\r\n"
  - delay: 93
    content: "E0616 15:39:23.120541       1 node.go:502] duplicate chassis for node vcx-virtual-machine and new chassis \r\n\r\n"
  - delay: 167
    content: "### start to diagnose node vcx-virtual-machine\r\n#### ovn-controller log:\r\n"
  - delay: 140
    content: "2021-06-16T07:40:17.747Z|00019|binding|INFO|kube-ovn-pinger-gxqqb.kube-system: Claiming 00:00:00:DA:D7:DE 10.16.0.4\r\n2021-06-16T07:40:18.871Z|00020|binding|INFO|Releasing lport kube-ovn-pinger-gxqqb.kube-system from this chassis.\r\n2021-06-16T07:40:19.697Z|00021|binding|INFO|Claiming lport kube-ovn-monitor-68c5b5cbb-btqfp.kube-system for this chassis.\r\n2021-06-16T07:40:19.697Z|00022|binding|INFO|kube-ovn-monitor-68c5b5cbb-btqfp.kube-system: Claiming 00:00:00:5C:44:2A 10.16.0.8\r\n2021-06-16T07:40:21.870Z|00023|binding|INFO|Claiming lport kube-ovn-pinger-kxqs8.kube-system for this chassis.\r\n2021-06-16T07:40:21.870Z|00024|binding|INFO|kube-ovn-pinger-kxqs8.kube-system: Claiming 00:00:00:AA:34:E0 10.16.0.9\r\n2021-06-16T07:40:27.142Z|00025|binding|INFO|Claiming lport coredns-f9fd979d6-v4m82.kube-system for this chassis.\r\n2021-06-16T07:40:27.142Z|00026|binding|INFO|coredns-f9fd979d6-v4m82.kube-system: Claiming 00:00:00:84:6A:65 10.16.0.7\r\n2021-06-16T07:40:27.172Z|00027|binding|INFO|Claiming lport coredns-f9fd979d6-cbm8m.kube-system for this chassis.\r\n2021-06-16T07:40:27.172Z|00028|binding|INFO|coredns-f9fd979d6-cbm8m.kube-system: Claiming 00:00:00:FF:62:0C 10.16.0.6\r\n"
  - delay: 30
    content: "\r\n#### ovs-vswitchd log:\r\n"
  - delay: 152
    content: "2021-06-16T07:39:47.818Z|00032|connmgr|INFO|br-int<->unix#0: 6 flow_mods 10 s ago (5 adds, 1 deletes)\r\n2021-06-16T07:40:02.258Z|00033|bridge|INFO|bridge br-int: added interface ovn0 on port 1\r\n2021-06-16T07:40:17.745Z|00034|bridge|INFO|bridge br-int: added interface 37a4bae11cb4_h on port 2\r\n2021-06-16T07:40:18.871Z|00035|bridge|INFO|bridge br-int: deleted interface 37a4bae11cb4_h on port 2\r\n2021-06-16T07:40:19.696Z|00036|bridge|INFO|bridge br-int: added interface 545b3d1a6ddc_h on port 3\r\n2021-06-16T07:40:21.869Z|00037|bridge|INFO|bridge br-int: added interface 30a45ba406f8_h on port 4\r\n2021-06-16T07:40:27.139Z|00038|bridge|INFO|bridge br-int: added interface 4be99d6d5f5c_h on port 5\r\n2021-06-16T07:40:27.171Z|00039|bridge|INFO|bridge br-int: added interface 2db61a0bf4f3_h on port 6\r\n2021-06-16T07:40:41.675Z|00043|bridge|ERR|Dropped 88 log messages in last 65 seconds (most recently, 5 seconds ago) due to excessive rate\r\n2021-06-16T07:40:41.675Z|00044|bridge|ERR|another ovs-vswitchd process is running, disabling this process (pid 1478) until it goes away\r\n"
  - delay: 33
    content: "\r\n#### ovs-vsctl show results:\r\n"
  - delay: 140
    content: "f4133400-237b-42ad-8e25-7932c853d7d3\r\n    Bridge br-int\r\n        fail_mode: secure\r\n        Port \"545b3d1a6ddc_h\"\r\n            Interface \"545b3d1a6ddc_h\"\r\n        Port \"30a45ba406f8_h\"\r\n            Interface \"30a45ba406f8_h\"\r\n        Port \"2db61a0bf4f3_h\"\r\n            Interface \"2db61a0bf4f3_h\"\r\n        Port br-int\r\n            Interface br-int\r\n                type: internal\r\n        Port ovn0\r\n            Interface ovn0\r\n                type: internal\r\n        Port \"4be99d6d5f5c_h\"\r\n            Interface \"4be99d6d5f5c_h\"\r\n    ovs_version: \"2.15.1\"\r\n"
  - delay: 31
    content: "\r\n#### pinger diagnose results:\r\n"
  - delay: 161
    content: "I0616 15:40:45.897233   22405 pinger.go:18] \r\n-------------------------------------------------------------------------------\r\nKube-OVN: \r\n  Version:       v1.8.0\r\n  Build:         2021-06-11_09:40:40\r\n  Commit:        git-30c59df\r\n  Go Version:    go1.16.5\r\n  Arch:          amd64\r\n-------------------------------------------------------------------------------\r\nI0616 15:40:45.898910   22405 config.go:134] pinger config is &{KubeConfigFile: KubeClient:0xc0004806e0 Port:8080 DaemonSetNamespace:kube-system DaemonSetName:kube-ovn-pinger Interval:5 Mode:job ExitCode:0 InternalDNS:kubernetes.default ExternalDNS:alauda.cn NodeName:vcx-virtual-machine HostIP:140.116.247.67 PodName:kube-ovn-pinger-kxqs8 PodIP:10.16.0.9 ExternalAddress:114.114.114.114 NetworkMode:kube-ovn PollTimeout:2 PollInterval:15 SystemRunDir:/var/run/openvswitch DatabaseVswitchName:Open_vSwitch DatabaseVswitchSocketRemote:unix:/var/run/openvswitch/db.sock DatabaseVswitchFileDataPath:/etc/openvswitch/conf.db DatabaseVswitchFileLogPath:/var/log/openvswitch/ovsdb-server.log DatabaseVswitchFilePidPath:/var/run/openvswitch/ovsdb-server.pid DatabaseVswitchFileSystemIDPath:/etc/openvswitch/system-id.conf ServiceVswitchdFileLogPath:/var/log/openvswitch/ovs-vswitchd.log ServiceVswitchdFilePidPath:/var/run/openvswitch/ovs-vswitchd.pid ServiceOvnControllerFileLogPath:/var/log/ovn/ovn-controller.log ServiceOvnControllerFilePidPath:/var/run/ovn/ovn-controller.pid}\r\nI0616 15:40:45.901453   22405 exporter.go:77] vcx-virtual-machine: exporter connect successfully\r\n"
  - delay: 6
    content: "I0616 15:40:45.908021   22405 ovn.go:20] ovs-vswitchd and ovsdb are up\r\n"
  - delay: 7
    content: "I0616 15:40:45.914825   22405 ovn.go:32] ovn_controller is up\r\nI0616 15:40:45.914852   22405 ovn.go:38] start to check port binding\r\n"
  - delay: 9
    content: "I0616 15:40:45.923953   22405 ovn.go:134] chassis id is 2c8ed036-91f3-4ea2-b6c9-839fee388e91\r\nI0616 15:40:45.928399   22405 ovn.go:48] port in sb is [kube-ovn-monitor-68c5b5cbb-btqfp.kube-system coredns-f9fd979d6-cbm8m.kube-system kube-ovn-pinger-kxqs8.kube-system node-vcx-virtual-machine coredns-f9fd979d6-v4m82.kube-system]\r\nI0616 15:40:45.928425   22405 ovn.go:60] ovs and ovn-sb binding check passed\r\n"
  - delay: 9
    content: "I0616 15:40:45.936777   22405 ping.go:245] start to check apiserver connectivity\r\n"
  - delay: 5
    content: "I0616 15:40:45.942449   22405 ping.go:254] connect to apiserver success in 5.65ms\r\nI0616 15:40:45.942485   22405 ping.go:126] start to check pod connectivity\r\n"
  - delay: 111
    content: "I0616 15:40:46.052779   22405 ping.go:155] ping pod: kube-ovn-pinger-kxqs8 10.16.0.9, count: 3, loss count 0, average rtt 0.07ms\r\nI0616 15:40:46.052875   22405 ping.go:80] start to check node connectivity\r\n"
  - delay: 305
    content: "I0616 15:40:46.358215   22405 ping.go:105] ping node: vcx-virtual-machine 140.116.247.67, count: 3, loss count 0, average rtt 0.23ms\r\nI0616 15:40:46.358282   22405 ping.go:209] start to check dns connectivity\r\nI0616 15:40:46.360230   22405 ping.go:222] resolve dns kubernetes.default to [10.96.0.1] in 1.93ms\r\nI0616 15:40:46.360256   22405 ping.go:227] start to check dns connectivity\r\n"
  - delay: 120
    content: "I0616 15:40:46.479884   22405 ping.go:240] resolve dns alauda.cn to [203.107.43.165] in 119.59ms\r\nI0616 15:40:46.479980   22405 ping.go:180] start to check ping external to 114.114.114.114\r\n"
  - delay: 321
    content: "I0616 15:40:46.801086   22405 ping.go:193] ping external address: 114.114.114.114, total count: 3, loss count 0, average rtt 218.43ms\r\n"
  - delay: 31
    content: "### finish diagnose node vcx-virtual-machine\r\n\r\n-------------------------------\r\n\r\n[Step 7] Install other CNI\r\n"
  - delay: 259
    content: "\e[33;1mWarning:\e[0m apiextensions.k8s.io/v1beta1 CustomResourceDefinition is deprecated in v1.16+, unavailable in v1.22+; use apiextensions.k8s.io/v1 CustomResourceDefinition\r\n"
  - delay: 5
    content: "customresourcedefinition.apiextensions.k8s.io/network-attachment-definitions.k8s.cni.cncf.io created\r\n"
  - delay: 13
    content: "clusterrole.rbac.authorization.k8s.io/multus created\r\n"
  - delay: 6
    content: "clusterrolebinding.rbac.authorization.k8s.io/multus created\r\n"
  - delay: 10
    content: "serviceaccount/multus created\r\n"
  - delay: 13
    content: "configmap/multus-cni-config created\r\n"
  - delay: 10
    content: "daemonset.apps/kube-multus-ds-amd64 created\r\n"
  - delay: 14
    content: "daemonset.apps/kube-multus-ds-ppc64le created\r\n"
  - delay: 17
    content: "daemonset.apps/kube-multus-ds-arm64v8 created\r\n"
  - delay: 25
    content: "daemonset.apps/kube-multus-ds-s390x created\r\n-------------------------------\r\n\r\n[Step 8] Install other Prometheus\r\n"
  - delay: 307
    content: "namespace/monitoring created\r\n"
  - delay: 426
    content: "customresourcedefinition.apiextensions.k8s.io/alertmanagerconfigs.monitoring.coreos.com created\r\n"
  - delay: 256
    content: "customresourcedefinition.apiextensions.k8s.io/alertmanagers.monitoring.coreos.com created\r\n"
  - delay: 45
    content: "customresourcedefinition.apiextensions.k8s.io/podmonitors.monitoring.coreos.com created\r\n"
  - delay: 12
    content: "customresourcedefinition.apiextensions.k8s.io/probes.monitoring.coreos.com created\r\n"
  - delay: 315
    content: "customresourcedefinition.apiextensions.k8s.io/prometheuses.monitoring.coreos.com created\r\n"
  - delay: 286
    content: "customresourcedefinition.apiextensions.k8s.io/prometheusrules.monitoring.coreos.com created\r\n"
  - delay: 88
    content: "customresourcedefinition.apiextensions.k8s.io/servicemonitors.monitoring.coreos.com created\r\n"
  - delay: 215
    content: "customresourcedefinition.apiextensions.k8s.io/thanosrulers.monitoring.coreos.com created\r\n"
  - delay: 10
    content: "clusterrole.rbac.authorization.k8s.io/prometheus-operator created\r\n"
  - delay: 10
    content: "clusterrolebinding.rbac.authorization.k8s.io/prometheus-operator created\r\n"
  - delay: 30
    content: "deployment.apps/prometheus-operator created\r\n"
  - delay: 13
    content: "service/prometheus-operator created\r\n"
  - delay: 20
    content: "serviceaccount/prometheus-operator created\r\n"
  - delay: 2752
    content: "No resources found\r\n"
  - delay: 461
    content: "alertmanager.monitoring.coreos.com/main created\r\n"
  - delay: 18
    content: "secret/alertmanager-main created\r\n"
  - delay: 40
    content: "service/alertmanager-main created\r\n"
  - delay: 62
    content: "serviceaccount/alertmanager-main created\r\n"
  - delay: 19
    content: "servicemonitor.monitoring.coreos.com/alertmanager created\r\n"
  - delay: 7
    content: "secret/grafana-datasources created\r\n"
  - delay: 283
    content: "configmap/grafana-dashboard-apiserver created\r\n"
  - delay: 9
    content: "configmap/grafana-dashboard-cluster-total created\r\n"
  - delay: 9
    content: "configmap/grafana-dashboard-controller-manager created\r\n"
  - delay: 14
    content: "configmap/grafana-dashboard-k8s-resources-cluster created\r\n"
  - delay: 8
    content: "configmap/grafana-dashboard-k8s-resources-namespace created\r\n"
  - delay: 9
    content: "configmap/grafana-dashboard-k8s-resources-node created\r\n"
  - delay: 8
    content: "configmap/grafana-dashboard-k8s-resources-pod created\r\n"
  - delay: 12
    content: "configmap/grafana-dashboard-k8s-resources-workload created\r\n"
  - delay: 12
    content: "configmap/grafana-dashboard-k8s-resources-workloads-namespace created\r\n"
  - delay: 24
    content: "configmap/grafana-dashboard-kubelet created\r\n"
  - delay: 6
    content: "configmap/grafana-dashboard-namespace-by-pod created\r\n"
  - delay: 9
    content: "configmap/grafana-dashboard-namespace-by-workload created\r\n"
  - delay: 17
    content: "configmap/grafana-dashboard-node-cluster-rsrc-use created\r\n"
  - delay: 16
    content: "configmap/grafana-dashboard-node-rsrc-use created\r\n"
  - delay: 9
    content: "configmap/grafana-dashboard-nodes created\r\n"
  - delay: 13
    content: "configmap/grafana-dashboard-persistentvolumesusage created\r\n"
  - delay: 8
    content: "configmap/grafana-dashboard-pod-total created\r\n"
  - delay: 16
    content: "configmap/grafana-dashboard-prometheus-remote-write created\r\n"
  - delay: 11
    content: "configmap/grafana-dashboard-prometheus created\r\n"
  - delay: 7
    content: "configmap/grafana-dashboard-proxy created\r\n"
  - delay: 6
    content: "configmap/grafana-dashboard-scheduler created\r\n"
  - delay: 6
    content: "configmap/grafana-dashboard-statefulset created\r\n"
  - delay: 10
    content: "configmap/grafana-dashboard-workload-total created\r\n"
  - delay: 58
    content: "configmap/grafana-dashboards created\r\n"
  - delay: 27
    content: "deployment.apps/grafana created\r\n"
  - delay: 42
    content: "service/grafana created\r\n"
  - delay: 24
    content: "serviceaccount/grafana created\r\n"
  - delay: 25
    content: "servicemonitor.monitoring.coreos.com/grafana created\r\n"
  - delay: 10
    content: "clusterrole.rbac.authorization.k8s.io/kube-state-metrics created\r\n"
  - delay: 10
    content: "clusterrolebinding.rbac.authorization.k8s.io/kube-state-metrics created\r\n"
  - delay: 7
    content: "deployment.apps/kube-state-metrics created\r\n"
  - delay: 6
    content: "service/kube-state-metrics created\r\n"
  - delay: 9
    content: "serviceaccount/kube-state-metrics created\r\n"
  - delay: 25
    content: "servicemonitor.monitoring.coreos.com/kube-state-metrics created\r\n"
  - delay: 13
    content: "clusterrole.rbac.authorization.k8s.io/node-exporter created\r\nclusterrolebinding.rbac.authorization.k8s.io/node-exporter created\r\n"
  - delay: 6
    content: "daemonset.apps/node-exporter created\r\n"
  - delay: 7
    content: "service/node-exporter created\r\n"
  - delay: 7
    content: "serviceaccount/node-exporter created\r\n"
  - delay: 12
    content: "servicemonitor.monitoring.coreos.com/node-exporter created\r\n"
  - delay: 6
    content: "apiservice.apiregistration.k8s.io/v1beta1.metrics.k8s.io created\r\n"
  - delay: 9
    content: "clusterrole.rbac.authorization.k8s.io/prometheus-adapter created\r\nclusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader created\r\n"
  - delay: 7
    content: "clusterrolebinding.rbac.authorization.k8s.io/prometheus-adapter created\r\n"
  - delay: 9
    content: "clusterrolebinding.rbac.authorization.k8s.io/resource-metrics:system:auth-delegator created\r\n"
  - delay: 6
    content: "clusterrole.rbac.authorization.k8s.io/resource-metrics-server-resources created\r\n"
  - delay: 9
    content: "configmap/adapter-config created\r\ndeployment.apps/prometheus-adapter created\r\n"
  - delay: 7
    content: "rolebinding.rbac.authorization.k8s.io/resource-metrics-auth-reader created\r\n"
  - delay: 28
    content: "service/prometheus-adapter created\r\n"
  - delay: 13
    content: "serviceaccount/prometheus-adapter created\r\n"
  - delay: 10
    content: "servicemonitor.monitoring.coreos.com/prometheus-adapter created\r\n"
  - delay: 12
    content: "clusterrole.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 8
    content: "clusterrolebinding.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 6
    content: "servicemonitor.monitoring.coreos.com/prometheus-operator created\r\n"
  - delay: 139
    content: "prometheus.monitoring.coreos.com/k8s created\r\nrolebinding.rbac.authorization.k8s.io/prometheus-k8s-config created\r\n"
  - delay: 6
    content: "rolebinding.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 9
    content: "rolebinding.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 38
    content: "rolebinding.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 5
    content: "role.rbac.authorization.k8s.io/prometheus-k8s-config created\r\n"
  - delay: 7
    content: "role.rbac.authorization.k8s.io/prometheus-k8s created\r\nrole.rbac.authorization.k8s.io/prometheus-k8s created\r\nrole.rbac.authorization.k8s.io/prometheus-k8s created\r\n"
  - delay: 112
    content: "prometheusrule.monitoring.coreos.com/prometheus-k8s-rules created\r\n"
  - delay: 10
    content: "service/prometheus-k8s created\r\nserviceaccount/prometheus-k8s created\r\n"
  - delay: 12
    content: "servicemonitor.monitoring.coreos.com/prometheus created\r\n"
  - delay: 11
    content: "servicemonitor.monitoring.coreos.com/kube-apiserver created\r\nservicemonitor.monitoring.coreos.com/coredns created\r\n"
  - delay: 6
    content: "servicemonitor.monitoring.coreos.com/kube-controller-manager created\r\n"
  - delay: 5
    content: "servicemonitor.monitoring.coreos.com/kube-scheduler created\r\n"
  - delay: 16
    content: "servicemonitor.monitoring.coreos.com/kubelet created\r\n-------------------------------\r\n\r\n[Final] Join worker to cluster\r\n"
  - delay: 205
    content: "W0616 15:40:54.154548   23793 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\r\n"
  - delay: 17
    content: "kubeadm join 140.116.247.67:6443 --token u41r0e.j5kady0k46qyi97x     --discovery-token-ca-cert-hash sha256:93aa1db0516195f09062928d294fffc245bda227f9bb3fafadeb5d8458948a84 \r\n-------------------------------\r\n\r\n"
  - delay: 1818
    content: "(base) \e]0;vcx@vcx-virtual-machine: ~/free5gc-kube-ovn\a\e[01;32mvcx@vcx-virtual-machine\e[00m:\e[01;34m~/free5gc-kube-ovn\e[00m$ "
  - delay: 4434
    content: "logout\r\n"
